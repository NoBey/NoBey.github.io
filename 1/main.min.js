var LoadingUI=function(e){function t(){e.call(this),this.createView()}__extends(t,e);var i=(__define,t),s=i.prototype;return s.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},s.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(e){function t(){e.call(this),this.bg=new egret.Sprite,this.timer=new egret.Timer(100),this.circle=new egret.Shape,this.label=new egret.TextField,this.num=0,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var i=(__define,t),s=i.prototype;return s.onAddToStage=function(e){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},s.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},s.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},s.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},s.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},s.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},s.ssss=function(e,t,i){var s=new egret.Sprite;s.graphics.beginFill(65280),s.graphics.drawRect(0,0,10,10),s.graphics.endFill(),s.x=Math.round(Math.random()*this.stage.stageWidth),e.addChild(s);var r=new Tm(s,t,i);this.addChild(r)},s.times=function(e){this.num;this.ssss(this.bg,this.circle,this.label)},s.createGameScene=function(){function e(e){s=e.currentTarget,r=e.stageX-s.x,n=e.stageY-s.y,this.bg.addChild(s),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,i,this)}function t(e){console.log(this.num),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,i,this)}function i(e){s.x=e.stageX-r}this.bg.graphics.beginFill(3368601),this.bg.graphics.drawRect(0,0,this.stage.stageWidth,this.stage.stageHeight),this.bg.graphics.endFill(),this.addChild(this.bg),this.timer.addEventListener(egret.TimerEvent.TIMER,this.times,this),this.timer.start();var s,r,n;this.circle.graphics.beginFill(16711680),this.circle.graphics.drawCircle(25,25,25),this.circle.graphics.endFill(),this.circle.y=this.stage.stageHeight-50,this.circle.x=this.stage.stageWidth/2-25,this.bg.addChild(this.circle),this.circle.touchEnabled=!0,this.circle.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e,this),this.circle.addEventListener(egret.TouchEvent.TOUCH_END,t,this),this.label.text="0",this.label.size=110,this.label.x=this.stage.stageWidth/2-30,this.addChild(this.label)},s.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},s.startAnimation=function(e){for(var t=this,i=new egret.HtmlTextParser,s=[],r=0;r<e.length;r++)s.push(i.parser(e[r]));var n=t.textfield,h=-1,a=function(){h++,h>=s.length&&(h=0);var e=s[h];t.changeDescription(n,e);var i=egret.Tween.get(n);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(a,t)};a()},s.changeDescription=function(e,t){e.textFlow=t},t}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var MyGrid=function(e){function t(){e.call(this),this.drawGrid()}__extends(t,e);var i=(__define,t),s=i.prototype;return s.drawGrid=function(){this.graphics.beginFill(255),this.graphics.drawRect(0,0,50,50),this.graphics.endFill(),this.graphics.beginFill(255),this.graphics.drawRect(50,50,50,50),this.graphics.endFill(),this.graphics.beginFill(16711680),this.graphics.drawRect(50,0,50,50),this.graphics.endFill(),this.graphics.beginFill(16711680),this.graphics.drawRect(0,50,50,50),this.graphics.endFill()},t}(egret.Shape);egret.registerClass(MyGrid,"MyGrid");var Tm=function(e){function t(t,i,s){e.call(this),this.timer=new egret.Timer(25),this.spr=t,this.xy=i,this.tx=s,this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerComFunc,this),this.timer.start()}__extends(t,e);var i=(__define,t),s=i.prototype;return s.timerFunc=function(e){var t=this.xy.hitTestPoint(this.spr.x,this.spr.y);if(this.spr.y>this.stage.stageHeight&&(this.timer.stop(),this.spr.parent&&this.spr.parent.removeChild(this.spr)),t){this.timer.stop(),this.spr.parent.removeChild(this.spr);var i=this.tx.text.valueOf();i++,console.log(i),this.tx.text=i.toString()}this.spr.y+=5},s.timerComFunc=function(e){console.log("timerComFunc count")},t}(egret.DisplayObjectContainer);egret.registerClass(Tm,"Tm");